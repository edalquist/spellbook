<!doctype html>
<html lang="en" ng-app="spellBookApp">
  <head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Spell Book</title>

     <!-- Bootstrap core CSS -->
    <link href="lib/bootstrap-3.1.1-dist/css/bootstrap.css" rel="stylesheet" />
    <link href="lib/bootstrap-3.1.1-dist/css/bootstrap-theme.css" rel="stylesheet" />

    <link rel="stylesheet" href="css/app.css" />

    <!-- angular -->
    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular/angular-route.js"></script>

    <!-- Angular-UI Bootstrap -->
    <script src="lib/bootstrap-custom/ui-bootstrap-custom-0.10.0.js"></script>
    <script src="lib/bootstrap-custom/ui-bootstrap-custom-tpls-0.10.0.js"></script>

    <script src="js/app.js"></script>
    <script src="js/types.js"></script>
    <script src="js/services.js"></script>
    <script src="js/controllers.js"></script>
  </head>

  <body ng-controller="SpellBookCtrl">
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <span class="navbar-brand character-select">
            <span>Level </span>
            <li class="dropdown">
              <a class="dropdown-toggle">{{ character.level || "select" }}</a>
              <ul class="dropdown-menu">
                <li ng-repeat="level in range(1, 20)">
                  <a ng-click="selectLevel(level)">{{ level }}</a>
                </li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle">{{ character.cls.name }}</a>
              <ul class="dropdown-menu">
                <li ng-repeat="cls in classes">
                  <a ng-click="selectClass(cls)">{{ cls.name }}</a>
                </li>
              </ul>
            </li>
            <span ng-show="character.cls.spec">
              <span> of the </span>
              <li class="dropdown">
                <a class="dropdown-toggle">{{ character.spec.name || "select" }}</a>
                <ul class="dropdown-menu">
                  <li ng-repeat="spec in character.cls.spec.types">
                    <a ng-click="selectSpec(spec)">{{ spec.name }}</a>
                  </li>
                </ul>
              </li>
              <span> {{ character.cls.spec.name }}</span>
            </span>
          </span>
        </div>
      </div>
    </div>

    <div class="container">
      <accordion close-others="{{ false }}">
        <accordion-group heading="Level {{level}} Spells" ng-repeat="level in range(1, character.level)" is-open="{{ true }}" class="level">
          <ul class="spell-list">
            <li ng-show="character.spec.spells[level - 1].length > 0">{{ character.spec.name }} {{ character.cls.spec.name }} Spells
              <ul>
                <li ng-repeat="spellName in character.spec.spells[level - 1]">{{ spellName }}</li>
              </ul>
            </li>
            <li ng-repeat="spellName in character.spells[level - 1]">{{ spellName }}</li>
            <li>
              <!-- ng-model="character.spells[level - 1][character.spells[level - 1].length]" -->
              <!-- <pre>{{ classSpells | filter:{name:character.cls.name} | json }}</pre> -->
              <input type="text"
                ng-model="spellSelectors[level - 1]"
                typeahead-on-select="spellSelected(level)"
                typeahead="spell for spell in findEntity('name', character.cls.name, classSpells).spells[level] | filter:$viewValue | limitTo:8" class="form-control">
            </li>
          </ul>
        </accordion-group>
      </accordian>
    </div>
  </body>

</html>
